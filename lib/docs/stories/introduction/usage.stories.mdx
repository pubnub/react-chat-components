import { Meta } from "@storybook/addon-docs/blocks";
import Screenshot from "../assets/screenshot2.png";

<Meta title="Introduction/Getting Started" />

# Getting Started

Create a sample chat app with [Message Input](https://pubnub.github.io/react-chat-components/docs/?path=/docs/components-message-input--default) and [Message List](https://pubnub.github.io/react-chat-components/docs/?path=/docs/components-member-list--default) components.

  <img src={Screenshot} alt="PubNub Chat Components" style={{ margin: "-20px 0 0 -54px" }} />

## Requirements

You will need these tools:

- [npm](https://docs.npmjs.com/cli/v6/commands/npm-install)
- [Node.js](https://nodejs.org/en/download/)
- Code editor (e.g. [Visual Studio Code](https://code.visualstudio.com/download))

## Steps

### Create a PubNub account

Before you start, you need to get **Publish Key** and **Subscribe Key** for your chat app. Sign in
or create an account on the [Admin Portal](https://dashboard.pubnub.com/) to create an app and a new
keyset, under which you will find the required keys.

<details><summary>More info</summary>
<p>

> **TIP**: When you create a new app on the Admin Portal, the first set of keys is generated
> automatically, but a single app can have as many keysets as you like. We recommend that you create
> separate keysets for production and test environments. There are some of the functionalities you
> might need to enable on your keyset depending on the use case, but they won't be required to
> complete this Getting Started guide. These options include:

- [**PRESENCE**](https://www.pubnub.com/docs/sdks/javascript/api-reference/presence) to monitor the
  subscribers of channels and delivers information on their real-time status
- [**STORAGE & PLAYBACK**](https://www.pubnub.com/docs/sdks/javascript/api-reference/storage-and-playback)
  (including correct **Retention**) to persist all messages as they're published.
- [**OBJECTS**](https://www.pubnub.com/docs/sdks/javascript/api-reference/objects) to easily store
  metadata about your application users and channels, and their membership associations, without the
  need to stand up your own databases. When using this feature, make sure you select a geographical
  region corresponding to most users of your application and to have these enabled: **User Metadata
  Events**, **Channel Metadata Events**, and **Membership Events**.

</p>
</details>

### Run a React app with chat components

You can set up a chat app in two ways:

<details><summary>Download sample app</summary>
<p>

Download and run a ready app.

<a
  href="https://github.com/pubnub/react-chat-components/archive/refs/heads/master.zip"
  style={{
    backgroundColor: "#1EA7FD",
    border: "none",
    padding: "8px 15px",
    color: "white",
    borderRadius: 3,
    marginTop: 10,
    display: "inline-block",
  }}
>
  Download samples
</a>

1. Unpack the archive into the folder of your choice.

2. Open a terminal app and go to the `samples/getting-started` folder.

3. Install the dependencies.

```sh
npm install
```

4. Run the app.

```sh
npm run dev
```

5. Open the [dev server locally](http://localhost:3000) and send your first message.

</p>
</details>

<details><summary>Extend your own app</summary>
<p>

Create an empty React project or extend your own React app by installing chat components.

1. Create a React project to use as a starter for your chat app code. To use
   [Create React App](https://create-react-app.dev/) with TypeScript, open a terminal app and follow the steps.

   > **TIP**: You can skip this step completely if you already have a working React application.

```js
npx create-react-app pubnub-react-chat --template typescript
cd pubnub-react-chat
```

2. Add the PubNub JavaScript SDK, React framework packages, and PubNub Chat Components for React.

```sh
npm install --save pubnub pubnub-react @pubnub/react-chat-components
```

3. Copy over the snippet below into `App.tsx` or another file of your choice. Remember to place your own keys from the Admin Portal for the
   `publishKey` and `subscribeKey` parameters in the PubNub instance configuration.

```jsx
/* Import PubNub JavaScript and React SDKs to create and access PubNub instance accross your app. */
/* Import PubNub Chat Components to easily create chat apps with PubNub. */
import PubNub from "pubnub";
import { PubNubProvider } from "pubnub-react";
import { Chat, MessageList, MessageInput } from "@pubnub/react-chat-components";

/* Create and configure your PubNub instance. Be sure to replace "myPublishKey" and "mySubscribeKey" 
with your own keyset and create a unique UUID for your default user. */
const pubnub = new PubNub({
  publishKey: "myPublishKey",
  subscribeKey: "mySubscribeKey",
  uuid: "your-first-user",
});
const currentChannel = "myCurrentChannel";
const theme = "light";

function App() {
  return (
    {/* PubNubProvider is a part of the PubNub React SDK and allows you to access PubNub instance
    in components down the tree. */}
    <PubNubProvider client={pubnub}>
      {/* Chat is an obligatory state provider. It allows you to configure some common component
      options, like the current channel and the general theme for the app.*/}
      <Chat {...{ currentChannel, theme }}>
        <MessageList />
        <MessageInput />
      </Chat>
    </PubNubProvider>
  );
}

export default App;
```

4. Run your app and send your first message.

```sh
npm start
```

</p>
</details>

## Next steps

Now that you have a React app running with two chat components, check out our [sample apps](https://pubnub.github.io/react-chat-components/samples) and [other chat components](https://pubnub.github.io/react-chat-components/docs/?path=/docs/components-chat-provider--default) to see how you can extent it further to make the app truly yours.
