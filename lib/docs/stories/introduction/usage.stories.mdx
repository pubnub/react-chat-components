import { Meta } from "@storybook/addon-docs/blocks";
import Screenshot from "../assets/screenshot2.png";

<Meta title="Introduction/Getting Started" />

# Getting Started

Create a sample chat app containing:

- [Message Input](https://pubnub.github.io/react-chat-components/docs/?path=/docs/components-message-input--default)
  field
- [Message List](https://pubnub.github.io/react-chat-components/docs/?path=/docs/components-member-list--default)
  that will show when you start typing and sending messages

## Requirements

You will use the following tools in the course of this guide:

- [Node.js](https://nodejs.org/en/download/)
- Code editor of your choice (e.g. [Visual Studio Code](https://code.visualstudio.com/download))

## Steps

Let's get started!

### Create a PubNub account

Before you start, you need to get **Subscribe Key** and **Publish Key** for your chat app. Sign in
or create an account on the [Admin Portal](https://dashboard.pubnub.com/) to create an app and a new
keyset.

> **TIP**: When you create a new app on the Admin Portal, the first set of keys is generated
> automatically, but a single app can have as many keysets as you like. We recommend that you create
> separate keysets for production and test environments. There are some of the functionalities you
> might need to enable on your keyset depending on the use case, but they won't be required to
> complete this Getting Started guide. These options include:

- [**PRESENCE**](https://www.pubnub.com/docs/sdks/javascript/api-reference/presence) to monitor the
  subscribers of channels and delivers information on their real-time status
- [**STORAGE & PLAYBACK**](https://www.pubnub.com/docs/sdks/javascript/api-reference/storage-and-playback)
  (including correct **Retention**) to persist all messages as they're published.
- [**OBJECTS**](https://www.pubnub.com/docs/sdks/javascript/api-reference/objects) to easily store
  metadata about your application users and channels, and their membership associations, without the
  need to stand up your own databases. When using this feature, make sure you select a geographical
  region corresponding to most users of your application and to have these enabled: **User Metadata
  Events**, **Channel Metadata Events**, and **Membership Events**.

<br />

### Download and run the existing starter app...

<a
  href="https://github.com/pubnub/react-chat-components/archive/refs/heads/master.zip"
  style={{
    backgroundColor: "#1EA7FD",
    border: "none",
    padding: "8px 15px",
    color: "white",
    borderRadius: 3,
    marginTop: 10,
    display: "inline-block",
  }}
>
  Download samples
</a>

1. Unpack the archive into your folder of choice

2. Open a terminal app and go to `samples/getting-started` folder inside of the previous step

3. Install the dependencies

```sh
npm install
```

4. Run the app

```sh
npm run dev
```

5. Open [local dev server](http://localhost:3000) to see the result

6. Skip to
   [next steps](https://pubnub.github.io/react-chat-components/docs/?path=/docs/introduction-getting-started--page#next-steps)
   to tweak the app to match your own needs!

<br />

### ... or add the components to your own React application

0. Create a React project you will use as a starter for your chat app code. To use the
   [`create-react-app`](https://create-react-app.dev/) together with TypeScript, follow these steps:

```js
npx create-react-app pubnub-react-chat --template typescript
cd pubnub-react-chat
```

> **TIP**: You can skip this step completely if you already have a working React application

1. Add the PubNub JavaScript SDK, React framework packages, and PubNub Chat Components for React:

```sh
npm install --save pubnub pubnub-react @pubnub/react-chat-components
```

2. Copy over the snippet below into `App.tsx` or another file of choice. Be sure to replace the
   keyset in PubNub instance configuration.

```jsx
/* Import PubNub JavaScript and React SDKs to create and access PubNub instance accross your app. */
/* Import PubNub Chat Components to easily create Chat apps with PubNub! */
import PubNub from "pubnub";
import { PubNubProvider } from "pubnub-react";
import { Chat, MessageList, MessageInput } from "@pubnub/react-chat-components";

/* Create and configure your PubNub instance. Be sure to replace myPublishKey/mySubscribeKey with
   your own keyset and assign a unique id to your default user. Depending on the use-case, this
   code may live in some root file of your application. */
const pubnub = new PubNub({
  publishKey: "myPublishKey",
  subscribeKey: "mySubscribeKey",
  uuid: "myUniqueUUID",
});
const currentChannel = "myCurrentChannel";
const theme = "light";

function App() {
  return (
    {/* PubNubProvider is a part of PubNub React SDK and it allows you to access PubNub instance
    in components down the tree. */}
    <PubNubProvider client={pubnub}>
      {/* Chat is an obligatory state provider. It allows you to configure some common component
      options, like currently shown channel and general theme. Be sure to check out the documentation
      for further customization features.*/}
      <Chat {...{ currentChannel, theme }}>
        <MessageList />
        <MessageInput />
      </Chat>
    </PubNubProvider>
  );
}

export default App;
```

3. Run your application. At this point it should look like on the screenshot below. Go ahead and
   send your first message!

```sh
npm start
```

<img src={Screenshot} alt="PubNub Chat Components" style={{ margin: "-20px 0 0 -54px" }} />

### Next steps

To expand the app further, check out the
[sample apps](https://pubnub.github.io/react-chat-components/samples) to see what is possible using
the components. You can find the source code of the sample applications in the `samples` folder at
the root of the repository.

Be sure to checkout the documentation for
[Chat Provider](https://pubnub.github.io/react-chat-components/docs/?path=/docs/components-chat-provider--default)
and rest of the components to see avilable options, customizations and so on, to make the app truly
yours!
